if theme.valine && theme.valine.enable
  #vcomment
  script(src='https://cdn1.lncld.net/static/js/3.0.4/av-min.js')
  script(src='https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js')
  script.
    var notify = '#{ theme.valine.notify }' == 'true';
    var verify = '#{ theme.valine.verify }' == 'true';
    var record_ip = '#{ theme.valine.recordip }' == 'true';
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = '#{ theme.valine.guest_info }'.split(',').filter(function(item){
      return GUEST_INFO.indexOf(item) > -1
    });
    guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
    window.valine = new Valine({
      el:'#vcomment',
      notify:notify,
      verify:verify,
      recordIP:record_ip,
      appId:'#{theme.valine.appId}',
      appKey:'#{theme.valine.appKey}',
      placeholder:'#{theme.valine.placeholder}',
      avatar:'#{theme.valine.avatar}',
      guest_info:guest_info,
      pageSize:'#{theme.valine.pageSize}',
      lang: '#{theme.valine.lang}'
    })
